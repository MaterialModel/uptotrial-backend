[tox]
env_list = py312, lint, typecheck, coverage
isolated_build = True

[testenv]
description = run the tests with pytest
package = wheel
wheel_build_env = .pkg
deps =
    pytest>=8.0.0
    pytest-cov>=4.1.0
    pytest-asyncio>=0.21.0
commands =
    pytest {tty:--color=yes} {posargs:tests}

[testenv:lint]
description = run linters
skip_install = true
deps =
    ruff>=0.2.2
commands =
    ruff check {posargs:.}

[testenv:typecheck]
description = run type checks
deps =
    mypy>=1.8.0
commands =
    mypy {posargs:src tests}
    
[testenv:coverage]
description = run tests with coverage reporting
deps =
    pytest>=8.0.0
    pytest-cov>=4.1.0
    pytest-asyncio>=0.21.0
commands =
    pytest --cov=src --cov-report=term-missing --cov-report=xml --cov-report=html {posargs:tests}
    
[testenv:specific]
description = run specific tests with custom options
deps =
    pytest>=8.0.0
    pytest-asyncio>=0.21.0
    pytest-cov>=4.1.0
commands =
    pytest {posargs}